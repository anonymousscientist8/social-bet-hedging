## Social uncertainty influences the optimal balance of quantity and quality of cooperative relationships

# Decscription
This project looked to model the behavior of the common vampire bat, looking to realistically simulate roost switching, foraging, allogrooming, food sharing, reproduction, birth, and death. By doing so, we hoped to investigate how manipulating social uncertainty via average roost switching rate influenced the evolution of more diversifying (i.e., investment into quantity of relationships) or focusing (i.e., investment into quality of relationships) allogrooming strategies. Included here are NetLogo behaviorspace output files showing the number of bats using each of six genetically-determined allogrooming strategies, as well as R code used to process this data and create figures.

# File summaries and instructions

All necessary R packages and NetLogo extensions are listed at the top of each R and NetLogo file, respectively. Filepaths will need to be edited to properly run code.

"food_sharing_donations_2010-2014.csv" is a data file showing instances of bats donating blood after fasting trials in a captive colony, observed between 2010 and 2014. Here, date refers to the date of donation, donor is the name of the donor, receiver is the name of the receiver, and donation.sec is the time, in seconds, that donations took place. Trial refers to the order of fasting trials. "average_weight_given.R" takes this data file and finds the average amount each bat donated per day in percent body weight.

"social_bet_hedging21 experiment-spreatsheets" each show the output of a set of simulation runs, each performed by behaviorspace in NetLogo. These also include dates and order of runs on that dates. For example, "social_bet_hedging21 experiment-spreadsheet_10jul24_1.csv" is the first batch of simulations run on July 10, 2024. Inlcuded here is the name of the NetLogo file ("social_bet_hedging21.nlogo"), the size of the in-simulation space (minimum and maximum x and y coordinates), run numbers, and the generalized, editable model paratmeters, including "roost-switch?" (whether roost switching was possible), social-pref? ("whether bats decided where to roost based on social preferences), "social-inheritance" (whether the child inherits its mother's preferences), "social-inheritance2" (whether a child inherits it's mother's friends' preferences towards the mother), "cheating" (whether bats will choose not to feed non-kin), "p_die" (probability of being killed while foraging), "limit" (maximum number of fully grown bats in each roost), "foraging" (daily foraging success rate), "decay" (amount of relationship score deterioration per day), "modifier" (an additive that modifies roost switching rate), "discriminatory" (food-sharing in-group bias control), "threshold" (coroosting in-group bias control), "share-boost" (how much each food-sharing event improves relationship score), "share-decline" (how much each rejected food-sharing event decreases relationship score), "groom_give" (how much relationship score can improve across all groomed partners summed per day), "donations" (how many food-sharing donations can be given per day), "amount" (how large food sharing donations are in percent body weight), "strats" (the number of different allogrooming strategies). For this, only "modifier", "threshold", and "discriminatory" changed between trials (-1, 0, and 1 for "modifier", 0 and 1200 for "threshold", and 30, 50, and 70 for "discriminatory"). These files also include time steps for each trial, which can be used to determine if the population survived to 200 years (72,999 days, or time steps). Finally, the file show, for each simulation, how many bats were pink ("Diversifying 3" in the paper), violet ("Diversifying 2"), green ("Diversifying 1"), yellow ("Focusing 1"), blue ("Focusing 2"), and yellow ("Focusing 3").

"strategies.R" serves two parts. The first chuck of "strategies3.R" requires that the proper "social_bet_hedging21 experiment spreadsheet" is manually entered into the code itself, including the filename. The spreadsheet itself must also be edited so only a single line showing all final population sizes in order of pink, magenta, violet, blue, green, and yellow (deleted first column and above rows in each of the spreadsheets). This creates a file called "temp.csv". Each of these temporary data files were manually combined to create "strategies3.csv", which includes "Threshold", "Discriminatory", and "Modifier" (see above for description), "Pink", "Magenta", "Violet", "Blue", "Green", and Yellow" (all of which show final populations for different allogrooming strategies, see above), "PopBust?" (whether the maximum number of adult bats were ever in the simulation), "Focusing" (the number of bats who could groom up to 4 bats a day), "Neutral" (the number of bats who could groom up to 8 bats a day), "Diversifying" (the number of bats who could groom up to 12 bats a day), "Equitable" (the number of bats who groomed all bats equally daily), "Inequitable" (the number of bats who groomed more familiar bats preferentially more), and "Average" (the average number of potential bats groomed per day).

"strategies3.csv" is uploaded to the second part of "strategies.R." This code filters the code and plots the distribution of grooming strategies for each of the 18 scenarios. These plots are not used in the paper. "fixation_check.R" uses "strategies3.csv" to determine what percentage of simulations only had one strategy remaining after 200 years.

"create_Fig1_v11.R" creates a figure using "strategies3.csv" showing the number of bats using each of the 6 allogrooming strategies across all 18 scenarios. Similarly, "create_Fig2_v12.R" usese "strategies3.csv" creates a figure showing how the average number of daily potential bats groomed changes as grooming rate ("modifier") changes across all 18 scenarios.
